<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <link rel="canonical" href="https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/">
    
    
    <title>Kotlin征途（八）：委托 | 黄文镔的博客 | 完美运用所学的一切</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#212121">
    
    
    <meta name="keywords" content="Android,Kotlin,编程">
    <meta name="description" content="本文将伴随大家进入Kotlin语言的正式学习生涯中，希望大家不要半途而废哦！笔者将Kotlin用于Android开发中，因此将从Android开发的视角叙述相关内容，同时将与Java语言有所联系。">
<meta property="og:type" content="article">
<meta property="og:title" content="Kotlin征途（八）：委托">
<meta property="og:url" content="https:&#x2F;&#x2F;coder-ice.gitee.io&#x2F;2019&#x2F;12&#x2F;15&#x2F;Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98&#x2F;index.html">
<meta property="og:site_name" content="黄文镔的博客">
<meta property="og:description" content="本文将伴随大家进入Kotlin语言的正式学习生涯中，希望大家不要半途而废哦！笔者将Kotlin用于Android开发中，因此将从Android开发的视角叙述相关内容，同时将与Java语言有所联系。">
<meta property="article:published_time" content="2019-12-15T07:55:08.000Z">
<meta property="article:modified_time" content="2020-02-21T03:09:40.084Z">
<meta property="article:author" content="黄文镔">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="Kotlin">
<meta property="article:tag" content="编程">
<meta name="twitter:card" content="summary">
    
        <link rel="alternate" type="application/atom+xml" title="黄文镔的博客" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/avatar.jpg">
    <link rel="stylesheet" href="/css/style.css?v=1.7.2">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

<meta name="generator" content="Hexo 4.1.0"></head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">黄文镔</h5>
          <a href="mailto:2509246913@qq.com" title="2509246913@qq.com" class="mail">2509246913@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/hwb0011" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                GitHub
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="http://www.weibo.com/hwb0011" target="_blank" >
                <i class="icon icon-lg icon-weibo"></i>
                微博
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Kotlin征途（八）：委托</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="搜尋">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Kotlin征途（八）：委托</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-12-15T07:55:08.000Z" itemprop="datePublished" class="page-time">
  2019-12-15
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Kotlin%E5%BE%81%E9%80%94/">Kotlin征途</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#1-由委托实现"><span class="post-toc-text">1. 由委托实现</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-1-简单用法"><span class="post-toc-text">1.1 简单用法</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-2-覆盖由委托实现的接口成员"><span class="post-toc-text">1.2 覆盖由委托实现的接口成员</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#2-委托属性"><span class="post-toc-text">2. 委托属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-1-标准委托"><span class="post-toc-text">2.1 标准委托</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-1-延迟属性-Lazy"><span class="post-toc-text">2.1.1 延迟属性 Lazy</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-1-2-可观察属性-Observable"><span class="post-toc-text">2.1.2 可观察属性 Observable</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-2-把属性储存在映射中"><span class="post-toc-text">2.2 把属性储存在映射中</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-3-局部委托属性（自-1-1-起）"><span class="post-toc-text">2.3 局部委托属性（自 1.1 起）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-4-属性委托要求"><span class="post-toc-text">2.4 属性委托要求</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-4-1-翻译规则"><span class="post-toc-text">2.4.1 翻译规则</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-4-2-提供委托（自-1-1-起）"><span class="post-toc-text">2.4.2 提供委托（自 1.1 起）</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-Kotlin征途（八）：委托"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Kotlin征途（八）：委托</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-12-15 15:55:08" datetime="2019-12-15T07:55:08.000Z"  itemprop="datePublished">2019-12-15</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Kotlin%E5%BE%81%E9%80%94/">Kotlin征途</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <blockquote>
<p>本文将伴随大家进入Kotlin语言的正式学习生涯中，希望大家不要半途而废哦！笔者将Kotlin用于Android开发中，因此将从Android开发的视角叙述相关内容，同时将与Java语言有所联系。  </p>
</blockquote>
<a id="more"></a>

<h1 id="1-由委托实现"><a href="#1-由委托实现" class="headerlink" title="1. 由委托实现"></a>1. 由委托实现</h1><h2 id="1-1-简单用法"><a href="#1-1-简单用法" class="headerlink" title="1.1 简单用法"></a>1.1 简单用法</h2><p>委托模式已经证明是实现继承的一个很好的替代方式， 而 Kotlin 可以零样板代码地原生支持它。 <code>Derived</code> 类可以通过将其所有公有成员都委托给指定对象来实现一个接口<code>Base</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">fun <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">class <span class="title">BaseImpl</span><span class="params">(val x: Int)</span> : Base </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">print</span><span class="params">()</span> </span>&#123; print(x) &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Derived(b: Base) : Base by b</span><br><span class="line"></span><br><span class="line"><span class="function">fun <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    val b = BaseImpl(<span class="number">10</span>)</span><br><span class="line">    Derived(b).print()  <span class="comment">// 输出  10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>Derived</code> 的超类型列表中的 <code>by b</code> 子句表示 <code>b</code> 将会在 <code>Derived</code> 中内部存储， 并且编译器将生成转发给 <code>b</code> 的所有 <code>Base</code> 的方法。</p>
<h2 id="1-2-覆盖由委托实现的接口成员"><a href="#1-2-覆盖由委托实现的接口成员" class="headerlink" title="1.2 覆盖由委托实现的接口成员"></a>1.2 覆盖由委托实现的接口成员</h2><p>覆盖符合预期：编译器会使用 <code>override</code> 覆盖的实现而不是委托对象中的。如果将 <code>override fun printMessage() { print(&quot;abc&quot;) }</code> 添加到 <code>Derived</code>，那么当调用 <code>printMessage</code> 时程序会输出<code>abc</code>而不是<code>10</code>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">fun <span class="title">printMessage</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    fun <span class="title">printMessageLine</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">class <span class="title">BaseImpl</span><span class="params">(val x: Int)</span> : Base </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">printMessage</span><span class="params">()</span> </span>&#123; print(x) &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">printMessageLine</span><span class="params">()</span> </span>&#123; println(x) &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Derived(b: Base) : Base by b &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">printMessage</span><span class="params">()</span> </span>&#123; print(<span class="string">"abc"</span>) &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">fun <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    val b = BaseImpl(<span class="number">10</span>)</span><br><span class="line">    Derived(b).printMessage()      <span class="comment">// 输出  abc</span></span><br><span class="line">    Derived(b).printMessageLine()  <span class="comment">// 输出  10</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但请注意，以这种方式重写的成员不会在委托对象的成员中调用 ，委托对象的成员只能访问其自身对接口成员实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Base</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    val message: String</span><br><span class="line"></span><br><span class="line">    <span class="function">fun <span class="title">print</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">class <span class="title">BaseImpl</span><span class="params">(val x: Int)</span> : Base </span>&#123;</span><br><span class="line"></span><br><span class="line">    override val message = <span class="string">"BaseImpl: x = $x"</span></span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">print</span><span class="params">()</span> </span>&#123; println(message) &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Derived(b: Base) : Base by b &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 在 b 的 `print` 实现中不会访问到这个属性</span></span><br><span class="line">    override val message = <span class="string">"Message of Derived"</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">fun <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    val b = BaseImpl(<span class="number">10</span>)</span><br><span class="line">    val derived = Derived(b)</span><br><span class="line">    derived.print()             <span class="comment">// 输出  BaseImpl: x = 10</span></span><br><span class="line">    println(derived.message)    <span class="comment">// 输出  Message of Derived</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2-委托属性"><a href="#2-委托属性" class="headerlink" title="2. 委托属性"></a>2. 委托属性</h1><p>有一些常见的属性类型，虽然我们可以在每次需要的时候手动实现它们， 但是如果能够为大家把他们只实现一次并放入一个库会更好。例如包括：</p>
<ul>
<li>延迟属性（<code>lazy properties</code>）: 其值只在首次访问时计算；</li>
<li>可观察属性（<code>observable properties</code>）: 监听器会收到有关此属性变更的通知；</li>
<li>把多个属性储存在一个映射（<code>map</code>）中，而不是每个存在单独的字段中。</li>
</ul>
<p>为了涵盖这些（以及其他）情况，Kotlin 支持 委托属性:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> p: <span class="function">String by <span class="title">Delegate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<p>语法是： <code>val/var &lt;属性名&gt;: &lt;类型&gt; by &lt;表达式&gt;</code>。在 <code>by</code> 后面的表达式是该 <code>委托</code>， 因为属性对应的 <code>get()</code>与 <code>set()</code>会被委托给它的 <code>getValue()</code> 与<code>setValue()</code> 方法。 属性的委托不必实现任何的接口，但是需要提供一个 <code>getValue()</code> 函数（与 <code>setValue()</code>——对于<code>var</code> 属性）。 例如:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> kotlin.reflect.KProperty</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Delegate</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">operator fun <span class="title">getValue</span><span class="params">(thisRef: Any?, property: KProperty&lt;*&gt;)</span>: String </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"$thisRef, thank you for delegating '$&#123;property.name&#125;' to me!"</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">operator fun <span class="title">setValue</span><span class="params">(thisRef: Any?, property: KProperty&lt;*&gt;, value: String)</span> </span>&#123;</span><br><span class="line">        println(<span class="string">"$value has been assigned to '$&#123;property.name&#125;' in $thisRef."</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当我们从委托到一个 <code>Delegate</code> 实例的 <code>p</code> 读取时，将调用 <code>Delegate</code> 中的 <code>getValue()</code> 函数， 所以它第一个参数是读出 <code>p</code> 的对象、第二个参数保存了对 <code>p</code> 自身的描述 （例如你可以取它的名字)。 例如:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">val e = Example()</span><br><span class="line"></span><br><span class="line">println(e.p)</span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Example@33a17727, thank you for delegating ‘p’ to me!</span><br></pre></td></tr></table></figure>

<p>类似地，当我们给 <code>p</code> 赋值时，将调用 <code>setValue()</code> 函数。前两个参数相同，第三个参数保存将要被赋予的值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">e.p = <span class="string">"NEW"</span></span><br></pre></td></tr></table></figure>

<p>输出结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NEW has been assigned to ‘p’ in Example@33a17727.</span><br></pre></td></tr></table></figure>

<p>委托对象的要求规范可以在下文找到。</p>
<blockquote>
<p>请注意，自 <code>Kotlin 1.1</code> 起你可以在函数或代码块中声明一个委托属性，因此它不一定是类的成员。 你可以在下文找到其示例。</p>
</blockquote>
<h2 id="2-1-标准委托"><a href="#2-1-标准委托" class="headerlink" title="2.1 标准委托"></a>2.1 标准委托</h2><p>Kotlin 标准库为几种有用的委托提供了工厂方法。</p>
<h3 id="2-1-1-延迟属性-Lazy"><a href="#2-1-1-延迟属性-Lazy" class="headerlink" title="2.1.1 延迟属性 Lazy"></a>2.1.1 延迟属性 Lazy</h3><p><code>lazy()</code> 是接受一个 <code>lambda</code> 并返回一个 <code>Lazy &lt;T&gt;</code> 实例的函数，返回的实例可以作为实现延迟属性的委托： 第一次调用 <code>get()</code> 会执行已传递给 <code>lazy()</code> 的 <code>lambda</code> 表达式并记录结果， 后续调用 <code>get()</code> 只是返回记录的结果。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">val lazyValue: String by lazy &#123;</span><br><span class="line">    println(<span class="string">"computed!"</span>)</span><br><span class="line">    <span class="string">"Hello"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">fun <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    println(lazyValue)</span><br><span class="line">    println(lazyValue)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>默认情况下，对于 <code>lazy</code> 属性的求值是同步锁的（<code>synchronized</code>）：该值只在一个线程中计算，并且所有线程会看到相同的值。如果初始化委托的同步锁不是必需的，这样多个线程可以同时执行，那么将 <code>LazyThreadSafetyMode.PUBLICATION</code> 作为参数传递给 <code>lazy()</code> 函数。 而如果你确定初始化将总是发生在与属性使用位于相同的线程，那么可以使用 <code>LazyThreadSafetyMode.NONE</code> 模式：它不会有任何线程安全的保证以及相关的开销。</p>
<h3 id="2-1-2-可观察属性-Observable"><a href="#2-1-2-可观察属性-Observable" class="headerlink" title="2.1.2 可观察属性 Observable"></a>2.1.2 可观察属性 Observable</h3><p><code>Delegates.observable()</code> 接受两个参数：初始值与修改时处理程序（<code>handler</code>）。 每当我们给属性赋值时会调用该处理程序（在赋值后执行）。它有三个参数：被赋值的属性、旧值与新值：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> kotlin.properties.Delegates</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> name: String by Delegates.observable(<span class="string">"&lt;no name&gt;"</span>) &#123;</span><br><span class="line">        prop, old, <span class="keyword">new</span> -&gt;</span><br><span class="line">        println(<span class="string">"$old -&gt; $new"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">fun <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    val user = User()</span><br><span class="line">    user.name = <span class="string">"first"</span></span><br><span class="line">    user.name = <span class="string">"second"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果你想截获赋值并“否决”它们，那么使用 <code>vetoable()</code> 取代 <code>observable()</code>。 在属性被赋新值生效之前会调用传递给 <code>vetoable</code> 的处理程序。</p>
<h3 id="2-2-把属性储存在映射中"><a href="#2-2-把属性储存在映射中" class="headerlink" title="2.2 把属性储存在映射中"></a>2.2 把属性储存在映射中</h3><p>一个常见的用例是在一个映射（<code>map</code>）里存储属性的值。 这经常出现在像解析 <code>JSON</code> 或者做其他“动态”事情的应用中。 在这种情况下，你可以使用映射实例自身作为委托来实现委托属性。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class User(val map: Map&lt;String, Any?&gt;) &#123;</span><br><span class="line"></span><br><span class="line">    val name: String by map</span><br><span class="line"></span><br><span class="line">    val age: Int     by map</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在这个例子中，构造函数接受一个映射参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">val user = User(mapOf(</span><br><span class="line">    <span class="string">"name"</span> to <span class="string">"John Doe"</span>,</span><br><span class="line">    <span class="string">"age"</span>  to <span class="number">25</span></span><br><span class="line">))</span><br></pre></td></tr></table></figure>

<p>委托属性会从这个映射中取值（通过字符串键——属性的名称）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">println(user.name) <span class="comment">// Prints "John Doe"</span></span><br><span class="line">println(user.age)  <span class="comment">// Prints 25</span></span><br></pre></td></tr></table></figure>

<p>这也适用于 <code>var</code> 属性，如果把只读的 <code>Map</code> 换成 <code>MutableMap</code> 的话：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">class MutableUser(val map: MutableMap&lt;String, Any?&gt;) &#123;</span><br><span class="line">    <span class="keyword">var</span> name: String by map</span><br><span class="line">    <span class="keyword">var</span> age: Int     by map</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-3-局部委托属性（自-1-1-起）"><a href="#2-3-局部委托属性（自-1-1-起）" class="headerlink" title="2.3 局部委托属性（自 1.1 起）"></a>2.3 局部委托属性（自 1.1 起）</h2><p>你可以将局部变量声明为委托属性。 例如，你可以使一个局部变量惰性初始化：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">fun <span class="title">example</span><span class="params">(computeFoo: ()</span> -&gt; Foo) </span>&#123;</span><br><span class="line">    <span class="function">val memoizedFoo by <span class="title">lazy</span><span class="params">(computeFoo)</span></span></span><br><span class="line"><span class="function">    <span class="title">if</span> <span class="params">(someCondition &amp;&amp; memoizedFoo.isValid()</span>) </span>&#123;</span><br><span class="line">        memoizedFoo.doSomething()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>memoizedFoo</code> 变量只会在第一次访问时计算。 如果 <code>someCondition</code> 失败，那么该变量根本不会计算。</p>
<h2 id="2-4-属性委托要求"><a href="#2-4-属性委托要求" class="headerlink" title="2.4 属性委托要求"></a>2.4 属性委托要求</h2><p>这里我们总结了委托对象的要求。</p>
<p>对于一个只读属性（即 <code>val</code> 声明的），委托必须提供一个名为 <code>getValue</code> 的函数，该函数接受以下参数：</p>
<ul>
<li><code>thisRef</code> —— 必须与 属性所有者 类型（对于扩展属性——指被扩展的类型）相同或者是它的超类型；</li>
<li><code>property</code> —— 必须是类型 <code>KProperty&lt;*&gt;</code> 或其超类型。</li>
</ul>
<p>这个函数必须返回与属性相同的类型（或其子类型）。</p>
<p>对于一个可变属性（即 <code>var</code> 声明的），委托必须额外提供一个名为 <code>setValue</code>的函数，该函数接受以下参数：</p>
<ul>
<li><code>thisRef</code> —— 同 <code>getValue()</code>；</li>
<li><code>property</code> —— 同 <code>getValue()</code>；</li>
<li><code>new value</code> —— 必须与属性同类型或者是它的子类型。</li>
</ul>
<p><code>getValue()</code> 与 <code>setValue()</code> 函数可以通过委托类的成员函数提供或者由扩展函数提供。 当你需要委托属性到原本未提供的这些函数的对象时后者会更便利。 两函数都需要用 <code>operator</code> 关键字来进行标记。</p>
<p>委托类可以实现包含所需<code>operator</code>方法的 <code>ReadOnlyProperty</code> 或 <code>ReadWriteProperty</code> 接口之一。 这俩接口是在 Kotlin 标准库中声明的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ReadOnlyProperty</span>&lt;<span class="title">in</span> <span class="title">R</span>, <span class="title">out</span> <span class="title">T</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">operator fun <span class="title">getValue</span><span class="params">(thisRef: R, property: KProperty&lt;*&gt;)</span>: T</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">interface ReadWriteProperty&lt;in R, T&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">operator fun <span class="title">getValue</span><span class="params">(thisRef: R, property: KProperty&lt;*&gt;)</span>: T</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    operator fun <span class="title">setValue</span><span class="params">(thisRef: R, property: KProperty&lt;*&gt;, value: T)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-1-翻译规则"><a href="#2-4-1-翻译规则" class="headerlink" title="2.4.1 翻译规则"></a>2.4.1 翻译规则</h3><p>在每个委托属性的实现的背后，Kotlin 编译器都会生成辅助属性并委托给它。 例如，对于属性 <code>prop</code>，生成隐藏属性 <code>prop$delegate</code>，而访问器的代码只是简单地委托给这个附加属性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> prop: <span class="function">Type by <span class="title">MyDelegate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 这段是由编译器生成的相应代码：</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">class C </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> val prop$delegate = MyDelegate()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> prop: Type</span><br><span class="line">        get() = prop$delegate.getValue(<span class="keyword">this</span>, <span class="keyword">this</span>::prop)</span><br><span class="line">        set(value: Type) = prop$delegate.setValue(<span class="keyword">this</span>, <span class="keyword">this</span>::prop, value)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Kotlin 编译器在参数中提供了关于 <code>prop</code> 的所有必要信息：第一个参数 <code>this</code> 引用到外部类 <code>C</code> 的实例而 <code>this::prop</code> 是 <code>KProperty</code> 类型的反射对象，该对象描述 <code>prop</code> 自身。</p>
<blockquote>
<p>请注意，直接在代码中引用绑定的可调用引用的语法 <code>this::prop</code> 自 <code>Kotlin 1.1</code> 起才可用。</p>
</blockquote>
<h3 id="2-4-2-提供委托（自-1-1-起）"><a href="#2-4-2-提供委托（自-1-1-起）" class="headerlink" title="2.4.2 提供委托（自 1.1 起）"></a>2.4.2 提供委托（自 1.1 起）</h3><p>通过定义 <code>provideDelegate</code> 操作符，可以扩展创建属性实现所委托对象的逻辑。 如果 <code>by</code> 右侧所使用的对象将 <code>provideDelegate</code> 定义为成员或扩展函数，那么会调用该函数来创建属性委托实例。</p>
<p><code>provideDelegate</code> 的一个可能的使用场景是在创建属性时（而不仅在其 <code>getter</code> 或 setter 中）检测属性一致性。</p>
<p>例如，如果要在绑定之前检测属性名称，可以这样写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">class ResourceDelegate&lt;T&gt; : ReadOnlyProperty&lt;MyUI, T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">override fun <span class="title">getValue</span><span class="params">(thisRef: MyUI, property: KProperty&lt;*&gt;)</span>: T </span>&#123; ... &#125;</span><br><span class="line"></span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line">class ResourceLoader&lt;T&gt;(id: ResourceID&lt;T&gt;) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">operator fun <span class="title">provideDelegate</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">            thisRef: MyUI,</span></span></span><br><span class="line"><span class="function"><span class="params">            prop: KProperty&lt;*&gt;</span></span></span><br><span class="line"><span class="function"><span class="params">    )</span>: ReadOnlyProperty&lt;MyUI, T&gt; </span>&#123;</span><br><span class="line">        checkProperty(thisRef, prop.name)</span><br><span class="line">        <span class="comment">// 创建委托</span></span><br><span class="line">        <span class="keyword">return</span> ResourceDelegate()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> fun <span class="title">checkProperty</span><span class="params">(thisRef: MyUI, name: String)</span> </span>&#123; …… &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyUI</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    fun &lt;T&gt; bindResource(id: ResourceID&lt;T&gt;): ResourceLoader&lt;T&gt; &#123; …… &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">val image by <span class="title">bindResource</span><span class="params">(ResourceID.image_id)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    val text by <span class="title">bindResource</span><span class="params">(ResourceID.text_id)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>

<p><code>provideDelegate</code> 的参数与 <code>getValue</code> 相同：</p>
<ul>
<li><code>thisRef</code> —— 必须与 属性所有者 类型（对于扩展属性——指被扩展的类型）相同或者是它的超类型；</li>
<li><code>property</code> —— 必须是类型 <code>KProperty&lt;*&gt;</code> 或其超类型。</li>
</ul>
<p>在创建 <code>MyUI</code> 实例期间，为每个属性调用 <code>provideDelegate</code> 方法，并立即执行必要的验证。</p>
<p>如果没有这种拦截属性与其委托之间的绑定的能力，为了实现相同的功能， 你必须显式传递属性名，这不是很方便：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 检测属性名称而不使用“provideDelegate”功能</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyUI</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">val image by <span class="title">bindResource</span><span class="params">(ResourceID.image_id, <span class="string">"image"</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">    val text by <span class="title">bindResource</span><span class="params">(ResourceID.text_id, <span class="string">"text"</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">fun &lt;T&gt; MyUI.<span class="title">bindResource</span><span class="params">(</span></span></span><br><span class="line"><span class="function"><span class="params">        id: ResourceID&lt;T&gt;,</span></span></span><br><span class="line"><span class="function"><span class="params">        propertyName: String</span></span></span><br><span class="line"><span class="function"><span class="params">)</span>: ReadOnlyProperty&lt;MyUI, T&gt; </span>&#123;</span><br><span class="line">   checkProperty(<span class="keyword">this</span>, propertyName)</span><br><span class="line">   <span class="comment">// 创建委托</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在生成的代码中，会调用 <code>provideDelegate</code> 方法来初始化辅助的 <code>prop$delegate</code> 属性。 比较对于属性声明 <code>val prop: Type by MyDelegate()</code> 生成的代码与上面（当 <code>provideDelegate</code> 方法不存在时）生成的代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> prop: <span class="function">Type by <span class="title">MyDelegate</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">// 这段代码是当“provideDelegate”功能可用时由编译器生成的代码：</span></span></span><br><span class="line"><span class="function">class C </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 调用“provideDelegate”来创建额外的“delegate”属性</span></span><br><span class="line">    <span class="keyword">private</span> val prop$delegate = MyDelegate().provideDelegate(<span class="keyword">this</span>, <span class="keyword">this</span>::prop)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> prop: Type</span><br><span class="line">        get() = prop$delegate.getValue(<span class="keyword">this</span>, <span class="keyword">this</span>::prop)</span><br><span class="line">        set(value: Type) = prop$delegate.setValue(<span class="keyword">this</span>, <span class="keyword">this</span>::prop, value)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>请注意，<code>provideDelegate</code> 方法只影响辅助属性的创建，并不会影响为 <code>getter</code> 或 <code>setter</code> 生成的代码。</p>
</blockquote>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最後更新時間：<time datetime="2020-02-21T03:09:40.084Z" itemprop="dateUpdated">2020-02-21 11:09:40</time>
</span><br>


        
        记录历程，回首过去，抓住点滴，迎接未来。进步就在于一行行没有被遗忘的代码，成功就在于一页页没有被踩死的文章。感谢您的支持，我是程序猿，我为梦想带盐！
        
    </div>
    
    <footer>
        <a href="https://coder-ice.gitee.io">
            <img src="/img/avatar.jpg" alt="黄文镔">
            黄文镔
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/" rel="tag">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Kotlin/" rel="tag">Kotlin</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E7%A8%8B/" rel="tag">编程</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/&title=《Kotlin征途（八）：委托》 — 黄文镔的博客&pic=https://coder-ice.gitee.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/&title=《Kotlin征途（八）：委托》 — 黄文镔的博客&source=
本文将伴随大家进入Kotlin语言的正式学习生涯中，希望大家不要半途而废哦！笔者将Kotlin用于Android开发中，因此将从Android开发的视角..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Kotlin征途（八）：委托》 — 黄文镔的博客&url=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/&via=https://coder-ice.gitee.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="waves-block waves-effect next">
      <a href="/2019/12/01/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E4%B8%83%EF%BC%89%EF%BC%9A%E7%89%B9%E6%AE%8A%E7%9A%84%E7%B1%BB/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Kotlin征途（七）：特殊的类</h4>
      </a>
    </div>
  
</nav>



    

















<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://unpkg.zhimg.com/gitalk/dist/gitalk.css">
    <script src="https://unpkg.zhimg.com/gitalk/dist/gitalk.min.js"></script>
    <script>
        var id = location.pathname
        if (location.pathname.length > 50) {
          id = location.pathname.replace(/\/\d+\/\d+\/\d+\//, '').replace('/', '').substring(0, 50)
        }
        const gitalk = new Gitalk({
          clientID: '50c13be55e1505e5d611',
          clientSecret: 'c81100c6fe66b456bbb56de82cb5b8cb835503d4',
          repo: 'hwb0011.github.io',
          owner: 'hwb0011',
          admin: ['hwb0011'],
          id: id,      // Ensure uniqueness and length less than 50
          title: document.title.split('|')[0],
          distractionFreeMode: false  // Facebook-like distraction free mode
        })

        gitalk.render('gitalk-container')
    </script>
</section>




</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢支持~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>本部落格係採用<a rel="license noopener" href="https://creativecommons.org/licenses/by/4.0/deed.zh_TW" target="_blank">創用 CC 姓名標示 4.0 國際 授權條款授權</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>黄文镔 &copy; 2019 - 2020</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/&title=《Kotlin征途（八）：委托》 — 黄文镔的博客&pic=https://coder-ice.gitee.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/&title=《Kotlin征途（八）：委托》 — 黄文镔的博客&source=
本文将伴随大家进入Kotlin语言的正式学习生涯中，希望大家不要半途而废哦！笔者将Kotlin用于Android开发中，因此将从Android开发的视角..." data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Kotlin征途（八）：委托》 — 黄文镔的博客&url=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/&via=https://coder-ice.gitee.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://coder-ice.gitee.io/2019/12/15/Kotlin%E5%BE%81%E9%80%94%EF%BC%88%E5%85%AB%EF%BC%89%EF%BC%9A%E5%A7%94%E6%89%98/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAEOCAAAAABd2qZ5AAAD2klEQVR42u3aSVLDQBAEQP//0/AAsFzVPXLokDoRYM+SOjS9vF7x8/Pnuf7Mu28lT7vj9e6vOx4cOHDgwFFe9fpw1+skv7m+ak6WvIb8jjhw4MCB4yxHEsbaqNQePUFPXkYedHHgwIEDx3M4ZkG0XSH5ZHJCHDhw4MDxZI59KjWrziXlSBw4cODA8RyOpDh4TdOGw/bCeej9Uq0UBw4cOHDMK2+vnOaZP98y34EDBw4cOEZNo7aF0xbsNuvPipVvb4cDBw4cONYc+4JdPqA2C+15SpbDffgkDhw4cOA4ytGW1domU36xOwqCSbMNBw4cOHBsODajBvthiH1aWLzzpIyIAwcOHDgOceTpUJ6e5dCzNCznLpJMHDhw4MCx5mgb/21SdDagbhK/4nXiwIEDB44FR5JQteW5zXBD2+LKQ3UUznHgwIEDx5qjbT7N0qRTnZ02wLfDEzhw4MCBY8+RB9c2JJ8aaMgTyPa0OHDgwIHjDo7ZofcBNU/ANqwJOg4cOHDgOMvRLpH/NR9c2A+95Q2tD6EXBw4cOHAcymJmRbc8QdoPySWNqIQgWgcHDhw4cCw48gu3jahvtpE2/wTgwIEDB46zHLMn3yb/fbtLm0CeHYDAgQMHDhzXfZbZqEHeLmrDcxuAc7JilAEHDhw4cCw4ro/bjhfkyVK7fvLz7C7/DDTgwIEDB475t4pRgLwJlAfOPKxugIrxCBw4cODAsebYFweTNGxTFpyF9tk4BQ4cOHDguI9jttmszDfrle1DPg4cOHDguJtjNljWNqLadDG/TAJUpHA4cODAgWNdHDwwFhD/NSE4Fc7zthYOHDhw4LiD4+z4WouVAyXNsIQABw4cOHCc5Wi3SZKl/KCbouTsDG2ZEgcOHDhw5Bz5ctchMA9a+2LfLPRGQR0HDhw4cKw5ZiW8JB3aBOa8/Ne2mor/O3DgwIEDx4hjFiDz1GtTXmzXzJO3tzviwIEDB46vcCRB9BRcHjLbAbuo7IgDBw4cOA5xtEMAm+3bFc5+68NJcODAgQPHIY58XODU2FwejPMa56xk+TaFw4EDBw4cI45TZbtTqV3yMk5BfxhlwIEDBw4co5V/ymc2QDAr7bVXzRO/wgkHDhw4cJQcs7DXDhPMkrS2wJevXzSicODAgQPHiKO92IZmWLArX1UbaHHgwIEDxx0cZ+N2fu1N2ykP6nWJEAcOHDhwfJEjP9As9coRZwneBzgcOHDgwPEYjuSI+cpn07zk9eDAgQMHjrMcdwwxzAqOeYjNW1YJNw4cOHDgOMWxKdW1RcB89CG/8CxgbwqLOHDgwIHjze6/gTfFB1TfW9oAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="/js/main.min.js?v=1.7.2"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.2" async></script>






<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
